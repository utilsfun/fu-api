<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>amis admin</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, maximum-scale=1"
    />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

    <link href="https://cdn.bootcdn.net/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../public/amis/sdk/cxd2.css" title="cxd"/>

    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="../public/amis/sdk/sdk.js"></script>


    <link rel="stylesheet" href="../public/amis/sdk/helper.css" />
    <script src="../public/vue2.js"></script>


    <style>
      html,
      body,
      .app-wrapper {
        position: relative;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

    </style>
</head>
<body>
<div id="root" class="app-wrapper"></div>
<script>

        var me;
        const pageUrl = window.location.href.replace("\.html",".jpage");
        var amisConfig = {

            // 全局 api 适配器。
            // api 自己也可以配置适配器，这里最好只处理通用逻辑。
            responseAdpater(api, response, query, request) {
              console.log(api);
              console.log(response);
              console.log(query);
              console.log(request);
              return response;
            },
            theme: 'cxd'
          };

      (function () {

        $.ajax({
          //请求方式
          type: "GET",
          //请求的媒体类型
          contentType: "application/json;charset=UTF-8",
          //请求地址
          url: pageUrl,
          //请求成功
          success: function (result) {
            console.log(result);
            let amis = amisRequire('amis/embed');
            // 通过替换下面这个配置来生成不同页面
            me = amis.embed("#root", result,{},amisConfig );
          },
          //请求失败，包含具体的错误信息
          error: function (e) {
            console.log(e.status);
            console.log(e.responseText);
          }
        });

      })();

</script>
</body>
</html>
